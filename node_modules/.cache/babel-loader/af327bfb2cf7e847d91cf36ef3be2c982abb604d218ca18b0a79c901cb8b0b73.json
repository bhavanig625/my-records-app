{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Alert}from\"react-bootstrap\";import{useAuth}from\"./AuthContext\";import{database}from\"./firebase\";import{ref}from\"firebase/database\";import{v4 as uuid4}from\"uuid\";import{useNavigate}from\"react-router-dom\";import{RecordForm}from\"./RecordForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var NewRecord=function NewRecord(){var formTitle=\"New Record\";var uuid=uuid4();var navigate=useNavigate();var _useAuth=useAuth(),currentUser=_useAuth.currentUser,UpdateData=_useAuth.UpdateData;var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];//const [setLoading] = useState(false);\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userMessage=_useState4[0],setUserMessage=_useState4[1];var dataref=ref(database,\"users/\"+currentUser.uid+\"/records/\"+uuid);var createNewRecord=function createNewRecord(finalRecord){try{setError(\"\");UpdateData(dataref,finalRecord).then(function(successMessage){setUserMessage(successMessage);navigate(\"/record-details/\"+uuid);}).catch(function(error){setError(\"Data could not be created. \");console.log(error);});//setLoading(false);\n}catch(e){setError(\"Error creating record\");console.log(\"Error updating data\",e);}};return/*#__PURE__*/_jsxs(\"div\",{children:[userMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:userMessage}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(RecordForm,{formTitle:formTitle,onSubmit:createNewRecord})]});};","map":{"version":3,"names":["React","useState","Alert","useAuth","database","ref","v4","uuid4","useNavigate","RecordForm","jsx","_jsx","jsxs","_jsxs","NewRecord","formTitle","uuid","navigate","_useAuth","currentUser","UpdateData","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","userMessage","setUserMessage","dataref","uid","createNewRecord","finalRecord","then","successMessage","catch","console","log","e","children","variant","onSubmit"],"sources":["/home/runner/work/my-records-app/my-records-app/src/LoginComponents/NewRecord.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Alert } from \"react-bootstrap\";\nimport { useAuth } from \"./AuthContext\";\nimport { database } from \"./firebase\";\nimport { ref } from \"firebase/database\";\nimport { v4 as uuid4 } from \"uuid\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RecordForm } from \"./RecordForm\";\n\nexport const NewRecord = () => {\n  const formTitle = \"New Record\";\n  const uuid = uuid4();\n  const navigate = useNavigate();\n  const { currentUser, UpdateData } = useAuth();\n  const [error, setError] = useState();\n  //const [setLoading] = useState(false);\n  const [userMessage, setUserMessage] = useState();\n  const dataref = ref(\n    database,\n    \"users/\" + currentUser.uid + \"/records/\" + uuid\n  );\n\n  const createNewRecord = (finalRecord) => {\n    try {\n      setError(\"\");\n\n      UpdateData(dataref, finalRecord)\n        .then((successMessage) => {\n          setUserMessage(successMessage);\n          navigate(\"/record-details/\" + uuid);\n        })\n        .catch((error) => {\n          setError(\"Data could not be created. \");\n          console.log(error);\n        });\n\n      //setLoading(false);\n    } catch (e) {\n      setError(\"Error creating record\");\n      console.log(\"Error updating data\", e);\n    }\n  };\n\n  return (\n    <div>\n      {userMessage && <Alert variant=\"success\">{userMessage}</Alert>}\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      <RecordForm formTitle={formTitle} onSubmit={createNewRecord} />\n    </div>\n  );\n};\n"],"mappings":"qIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,KAAK,KAAQ,iBAAiB,CACvC,OAASC,OAAO,KAAQ,eAAe,CACvC,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,GAAG,KAAQ,mBAAmB,CACvC,OAASC,EAAE,GAAI,CAAAC,KAAK,KAAQ,MAAM,CAClC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,UAAU,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,MAAO,IAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC7B,GAAM,CAAAC,SAAS,CAAG,YAAY,CAC9B,GAAM,CAAAC,IAAI,CAAGT,KAAK,CAAC,CAAC,CACpB,GAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,IAAAU,QAAA,CAAoCf,OAAO,CAAC,CAAC,CAArCgB,WAAW,CAAAD,QAAA,CAAXC,WAAW,CAAEC,UAAU,CAAAF,QAAA,CAAVE,UAAU,CAC/B,IAAAC,SAAA,CAA0BpB,QAAQ,CAAC,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB;AACA,IAAAI,UAAA,CAAsCzB,QAAQ,CAAC,CAAC,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,GAAM,CAAAG,OAAO,CAAGzB,GAAG,CACjBD,QAAQ,CACR,QAAQ,CAAGe,WAAW,CAACY,GAAG,CAAG,WAAW,CAAGf,IAC7C,CAAC,CAED,GAAM,CAAAgB,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,WAAW,CAAK,CACvC,GAAI,CACFR,QAAQ,CAAC,EAAE,CAAC,CAEZL,UAAU,CAACU,OAAO,CAAEG,WAAW,CAAC,CAC7BC,IAAI,CAAC,SAACC,cAAc,CAAK,CACxBN,cAAc,CAACM,cAAc,CAAC,CAC9BlB,QAAQ,CAAC,kBAAkB,CAAGD,IAAI,CAAC,CACrC,CAAC,CAAC,CACDoB,KAAK,CAAC,SAACZ,KAAK,CAAK,CAChBC,QAAQ,CAAC,6BAA6B,CAAC,CACvCY,OAAO,CAACC,GAAG,CAACd,KAAK,CAAC,CACpB,CAAC,CAAC,CAEJ;AACF,CAAE,MAAOe,CAAC,CAAE,CACVd,QAAQ,CAAC,uBAAuB,CAAC,CACjCY,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEC,CAAC,CAAC,CACvC,CACF,CAAC,CAED,mBACE1B,KAAA,QAAA2B,QAAA,EACGZ,WAAW,eAAIjB,IAAA,CAACT,KAAK,EAACuC,OAAO,CAAC,SAAS,CAAAD,QAAA,CAAEZ,WAAW,CAAQ,CAAC,CAC7DJ,KAAK,eAAIb,IAAA,CAACT,KAAK,EAACuC,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEhB,KAAK,CAAQ,CAAC,cACjDb,IAAA,CAACF,UAAU,EAACM,SAAS,CAAEA,SAAU,CAAC2B,QAAQ,CAAEV,eAAgB,CAAE,CAAC,EAC5D,CAAC,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}