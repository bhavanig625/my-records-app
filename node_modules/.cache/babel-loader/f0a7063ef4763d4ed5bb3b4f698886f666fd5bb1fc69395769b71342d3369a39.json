{"ast":null,"code":"import _objectSpread from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Alert,Container,Row,Col}from\"react-bootstrap\";import{useAuth}from\"./AuthContext\";import{useNavigate}from\"react-router-dom\";import{database}from\"./firebase\";import{ref,onValue}from\"firebase/database\";import{RecordList}from\"./RecordList\";import{NewButton}from\"./NewButton\";import{DeletionAlert}from\"./DeletionAlert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,1),message=_useState6[0];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filteredData=_useState8[0],setFilteredData=_useState8[1];var dataref=ref(database,\"users/\"+(currentUser===null||currentUser===void 0?void 0:currentUser.uid)+\"/records\");var navigate=useNavigate();function handleAddNewRecord(){navigate(\"/new-record\");}function getFilteredData(filteredData){setFilteredData(filteredData);}useEffect(function(){var unsubscribe=onValue(dataref,function(snapshot){if(snapshot.exists()){var retrievedData=snapshot.val();if(retrievedData){var dataArray=Object.entries(retrievedData).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return _objectSpread({key:key},value);});dataArray.sort(function(a,b){var recordNameA=a.recordName||\"\";var recordNameB=b.recordName||\"\";return recordNameA.localeCompare(recordNameB);});setData(dataArray);setFilteredData(dataArray);}setError(null);}},function(error){setError(error.message);});return function(){return unsubscribe();};},[message,dataref]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(DeletionAlert,{}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"mb-3\",md:2,children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NewButton,{handleAddNewRecord:handleAddNewRecord})})})}),/*#__PURE__*/_jsx(Col,{md:10,children:/*#__PURE__*/_jsx(RecordList,{recordsList:filteredData,getFilteredData:getFilteredData,records:data})})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","Alert","Container","Row","Col","useAuth","useNavigate","database","ref","onValue","RecordList","NewButton","DeletionAlert","jsx","_jsx","jsxs","_jsxs","Dashboard","_useAuth","currentUser","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","_useState5","_useState6","message","_useState7","_useState8","filteredData","setFilteredData","dataref","uid","navigate","handleAddNewRecord","getFilteredData","unsubscribe","snapshot","exists","retrievedData","val","dataArray","Object","entries","map","_ref","_ref2","key","value","_objectSpread","sort","a","b","recordNameA","recordName","recordNameB","localeCompare","children","variant","className","md","recordsList","records"],"sources":["/home/runner/work/my-records-app/my-records-app/src/LoginComponents/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Alert, Container, Row, Col } from \"react-bootstrap\";\nimport { useAuth } from \"./AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { database } from \"./firebase\";\nimport { ref, onValue } from \"firebase/database\";\nimport { RecordList } from \"./RecordList\";\nimport { NewButton } from \"./NewButton\";\nimport { DeletionAlert } from \"./DeletionAlert\";\n\nfunction Dashboard() {\n  const { currentUser } = useAuth();\n  const [data, setData] = useState();\n  const [error, setError] = useState(null);\n  const [message] = useState(null);\n  const [filteredData, setFilteredData] = useState([]);\n  const dataref = ref(database, \"users/\" + currentUser?.uid + \"/records\");\n\n  const navigate = useNavigate();\n\n  function handleAddNewRecord() {\n    navigate(\"/new-record\");\n  }\n\n  function getFilteredData(filteredData) {\n    setFilteredData(filteredData);\n  }\n\n  useEffect(() => {\n    const unsubscribe = onValue(\n      dataref,\n      (snapshot) => {\n        if (snapshot.exists()) {\n          const retrievedData = snapshot.val();\n          if (retrievedData) {\n            const dataArray = Object.entries(retrievedData).map(\n              ([key, value]) => ({ key, ...value })\n            );\n\n            dataArray.sort((a, b) => {\n              const recordNameA = a.recordName || \"\";\n              const recordNameB = b.recordName || \"\";\n              return recordNameA.localeCompare(recordNameB);\n            });\n            setData(dataArray);\n            setFilteredData(dataArray);\n          }\n          setError(null);\n        }\n      },\n      (error) => {\n        setError(error.message);\n      }\n    );\n    return () => unsubscribe();\n  }, [message, dataref]);\n\n  return (\n    <Container>\n      <DeletionAlert />\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      <Row>\n        <Col className=\"mb-3\" md={2}>\n          <div className=\"d-flex justify-content-between\">\n            <div>\n              <NewButton handleAddNewRecord={handleAddNewRecord} />\n            </div>\n            {/* <SearchRecord records={data} getFilteredData={getFilteredData} /> */}\n          </div>\n        </Col>\n        <Col md={10}>\n          <RecordList\n            recordsList={filteredData}\n            getFilteredData={getFilteredData}\n            records={data}\n          />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}