{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{Form,Button,Card,Alert}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{useAuth}from\"./AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProfileUpdate(){var emailRef=useRef();var _useAuth=useAuth(),currentUser=_useAuth.currentUser,UpdateUserProfile=_useAuth.UpdateUserProfile;var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,1),dataloading=_useState8[0];var _useState9=useState({fname:currentUser.displayName,email:currentUser.email}),_useState10=_slicedToArray(_useState9,2),userProfile=_useState10[0],setUserProfile=_useState10[1];//const dataref = ref(database, \"users/details/\" + currentUser.uid);\n//const dataref = ref(database, \"users/\" + currentUser.uid + \"/details\");\n// useEffect(() => {\n//   GetData(dataref);\n// }, []);\n// // useEffect(() => {\n// async function GetData() {\n//   await get(dataref)\n//     .then((snapshot) => {\n//       if (snapshot.exists()) {\n//         const retrievedData = snapshot.val();\n//         setDataLoading(false);\n//         setUserProfile(retrievedData);\n//       } else {\n//         console.log(\"No data available at\", dataref);\n//       }\n//     })\n//     .catch((error) => {\n//       console.error(\"Error fetching data:\", error);\n//     });\n// }\nfunction handleProfileUpdate(_x){return _handleProfileUpdate.apply(this,arguments);}function _handleProfileUpdate(){_handleProfileUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setError(\"\");setLoading(true);_context.next=6;return UpdateUserProfile(userProfile);case 6:setMessage(\"Profile updated successfully\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setError(\"Failed to update profile\");case 12:setLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return _handleProfileUpdate.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"400px\",margin:\"0 auto\"},children:dataloading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Update Profile\"}),message&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:message}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleProfileUpdate,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"fname\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"mb-1\",children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:userProfile===null||userProfile===void 0?void 0:userProfile.fname,onChange:function onChange(e){return setUserProfile(_objectSpread(_objectSpread({},userProfile),{},{fname:e.target.value}));}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"mail\",className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,value:currentUser.email,disabled:true})]}),/*#__PURE__*/_jsx(Form.Group,{disabled:loading,id:\"button\",className:\"mt-4\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-100\",children:\"Update Profile\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-center mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:\"Cancel\"})})]})});}export default ProfileUpdate;","map":{"version":3,"names":["React","useRef","useState","Form","Button","Card","Alert","Link","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfileUpdate","emailRef","_useAuth","currentUser","UpdateUserProfile","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","loading","setLoading","_useState5","_useState6","message","setMessage","_useState7","_useState8","dataloading","_useState9","fname","displayName","email","_useState10","userProfile","setUserProfile","handleProfileUpdate","_x","_handleProfileUpdate","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","preventDefault","t0","stop","style","maxWidth","margin","children","Body","className","variant","onSubmit","Group","id","Label","Control","type","value","onChange","_objectSpread","target","ref","disabled","to"],"sources":["/home/runner/work/my-records-app/my-records-app/src/LoginComponents/ProfileUpdate.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\n\nfunction ProfileUpdate() {\n  const emailRef = useRef();\n  const { currentUser, UpdateUserProfile } = useAuth();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [dataloading] = useState(false);\n  const [userProfile, setUserProfile] = useState({\n    fname: currentUser.displayName,\n    email: currentUser.email,\n  });\n  //const dataref = ref(database, \"users/details/\" + currentUser.uid);\n  //const dataref = ref(database, \"users/\" + currentUser.uid + \"/details\");\n\n  // useEffect(() => {\n  //   GetData(dataref);\n  // }, []);\n  // // useEffect(() => {\n  // async function GetData() {\n  //   await get(dataref)\n  //     .then((snapshot) => {\n  //       if (snapshot.exists()) {\n  //         const retrievedData = snapshot.val();\n  //         setDataLoading(false);\n  //         setUserProfile(retrievedData);\n  //       } else {\n  //         console.log(\"No data available at\", dataref);\n  //       }\n  //     })\n  //     .catch((error) => {\n  //       console.error(\"Error fetching data:\", error);\n  //     });\n  // }\n\n  async function handleProfileUpdate(e) {\n    e.preventDefault();\n\n    try {\n      setError(\"\");\n      setLoading(true);\n      await UpdateUserProfile(userProfile);\n      setMessage(\"Profile updated successfully\");\n    } catch (e) {\n      setError(\"Failed to update profile\");\n    }\n    setLoading(false);\n  }\n\n  return (\n    <div style={{ maxWidth: \"400px\", margin: \"0 auto\" }}>\n      {dataloading ? (\n        <p>Loading...</p>\n      ) : (\n        <>\n          <Card>\n            <Card.Body>\n              <h2 className=\"text-center mb-4\">Update Profile</h2>\n              {message && <Alert variant=\"success\">{message}</Alert>}\n              {error && <Alert variant=\"danger\">{error}</Alert>}\n              <Form onSubmit={handleProfileUpdate}>\n                <Form.Group id=\"fname\">\n                  <Form.Label className=\"mb-1\">Name</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    value={userProfile?.fname}\n                    onChange={(e) =>\n                      setUserProfile({ ...userProfile, fname: e.target.value })\n                    }\n                  />\n                </Form.Group>\n                <Form.Group id=\"mail\" className=\"mt-3\">\n                  <Form.Label className=\"mb-1\">Email</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    ref={emailRef}\n                    value={currentUser.email}\n                    disabled\n                  />\n                </Form.Group>\n\n                <Form.Group disabled={loading} id=\"button\" className=\"mt-4\">\n                  <Button type=\"submit\" className=\"w-100\">\n                    Update Profile\n                  </Button>\n                </Form.Group>\n              </Form>\n            </Card.Body>\n          </Card>\n          <div className=\"w-100 text-center mt-3\">\n            <Link to=\"/home\">Cancel</Link>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default ProfileUpdate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}