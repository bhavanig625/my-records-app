{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{database}from\"./firebase\";import{ref,onValue}from\"firebase/database\";import{useEffect}from\"react\";import{useAuth}from\"./AuthContext\";import{RecordForm}from\"./RecordForm\";import{jsx as _jsx}from\"react/jsx-runtime\";export var EditRecord=function EditRecord(){var navigate=useNavigate();var _useAuth=useAuth(),currentUser=_useAuth.currentUser,UpdateData=_useAuth.UpdateData;var _useParams=useParams(),key=_useParams.key;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,1),setError=_useState4[0];var dataref=ref(database,\"users/\"+(currentUser===null||currentUser===void 0?void 0:currentUser.uid)+\"/records/\"+key);var formTitle=\"Edit Record\";useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var unsubscribe;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:unsubscribe=onValue(dataref,function(snapshot){if(snapshot.exists()){var retrievedData=snapshot.val();setData(retrievedData);}},function(error){console.log(error.message);});return _context.abrupt(\"return\",function(){return unsubscribe();});case 2:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleRecordUpdate=function handleRecordUpdate(finalRecord){UpdateData(dataref,finalRecord).then(function(){navigate(\"/record-details/\"+key);}).catch(function(error){setError(\"Data could not be updated. \");});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(RecordForm,{formTitle:formTitle,data:data,onSubmit:handleRecordUpdate,recordKey:key})});};","map":{"version":3,"names":["React","useState","useParams","useNavigate","database","ref","onValue","useEffect","useAuth","RecordForm","jsx","_jsx","EditRecord","navigate","_useAuth","currentUser","UpdateData","_useParams","key","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","setError","dataref","uid","formTitle","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","unsubscribe","wrap","_callee$","_context","prev","next","snapshot","exists","retrievedData","val","error","console","log","message","abrupt","stop","apply","arguments","handleRecordUpdate","finalRecord","then","catch","children","onSubmit","recordKey"],"sources":["/home/runner/work/my-records-app/my-records-app/src/LoginComponents/EditRecord.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { database } from \"./firebase\";\nimport { ref, onValue } from \"firebase/database\";\nimport { useEffect } from \"react\";\nimport { useAuth } from \"./AuthContext\";\nimport { RecordForm } from \"./RecordForm\";\n\nexport const EditRecord = () => {\n  const navigate = useNavigate();\n  const { currentUser, UpdateData } = useAuth();\n  const { key } = useParams();\n  const [data, setData] = useState({});\n  const [setError] = useState(\"\");\n  const dataref = ref(\n    database,\n    \"users/\" + currentUser?.uid + \"/records/\" + key\n  );\n  const formTitle = \"Edit Record\";\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const unsubscribe = onValue(\n        dataref,\n        (snapshot) => {\n          if (snapshot.exists()) {\n            const retrievedData = snapshot.val();\n            setData(retrievedData);\n          }\n        },\n        (error) => {\n          console.log(error.message);\n        }\n      );\n      return () => unsubscribe();\n    };\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleRecordUpdate = (finalRecord) => {\n    UpdateData(dataref, finalRecord)\n      .then(() => {\n        navigate(\"/record-details/\" + key);\n      })\n      .catch((error) => {\n        setError(\"Data could not be updated. \");\n      });\n  };\n\n  return (\n    <div>\n      <RecordForm\n        formTitle={formTitle}\n        data={data}\n        onSubmit={handleRecordUpdate}\n        recordKey={key}\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}