{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/my-records-app/my-records-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Form,Button,Card,Alert}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{useAuth}from\"./AuthContext\";import{reauthenticateWithCredential,EmailAuthProvider,updatePassword}from\"firebase/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ChangePassword=function ChangePassword(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),oldPassword=_useState8[0],setOldPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newPassword=_useState10[0],setNewPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),confirmPassword=_useState12[0],setConfirmPassword=_useState12[1];function handlePasswordUpdate(_x){return _handlePasswordUpdate.apply(this,arguments);}function _handlePasswordUpdate(){_handlePasswordUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var credential;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(oldPassword){_context.next=5;break;}return _context.abrupt(\"return\",setError(\"Please enter old Password\"));case 5:if(newPassword){_context.next=9;break;}return _context.abrupt(\"return\",setError(\"Please enter new password\"));case 9:if(confirmPassword){_context.next=13;break;}return _context.abrupt(\"return\",setError(\"Please confirm password\"));case 13:if(!(newPassword!==confirmPassword)){_context.next=15;break;}return _context.abrupt(\"return\",setError(\"Passwords are not matching\"));case 15:_context.prev=15;setLoading(true);setError(\"\");setMessage(\"\");credential=EmailAuthProvider.credential(currentUser.email,oldPassword);_context.next=22;return reauthenticateWithCredential(currentUser,credential).then(function(){updatePassword(currentUser,newPassword);setMessage(\"Password updated successfully\");setLoading(false);});case 22:_context.next=28;break;case 24:_context.prev=24;_context.t0=_context[\"catch\"](15);setError(\"Failed to update password\");console.error(\"Re-authentication error:\",_context.t0);case 28:case\"end\":return _context.stop();}},_callee,null,[[15,24]]);}));return _handlePasswordUpdate.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Change Password\"}),message&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:message}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handlePasswordUpdate,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"mb-1\",children:\"Current Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:oldPassword,onChange:function onChange(e){return setOldPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"new-password\",className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"mb-1\",children:\"New Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:newPassword,onChange:function onChange(e){return setNewPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password-confirm\",className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"mb-1\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(Form.Group,{disabled:loading,id:\"button\",className:\"mt-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-100 mt-3\",children:\"Update Password\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:\"Cancel\"})})]});};","map":{"version":3,"names":["React","useState","Form","Button","Card","Alert","Link","useAuth","reauthenticateWithCredential","EmailAuthProvider","updatePassword","jsx","_jsx","jsxs","_jsxs","ChangePassword","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","loading","setLoading","_useState5","_useState6","message","setMessage","_useAuth","currentUser","_useState7","_useState8","oldPassword","setOldPassword","_useState9","_useState10","newPassword","setNewPassword","_useState11","_useState12","confirmPassword","setConfirmPassword","handlePasswordUpdate","_x","_handlePasswordUpdate","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","credential","wrap","_callee$","_context","prev","next","preventDefault","abrupt","email","then","t0","console","stop","style","maxWidth","margin","children","Body","className","variant","onSubmit","Group","id","Label","Control","type","value","onChange","target","required","disabled","to"],"sources":["/home/runner/work/my-records-app/my-records-app/src/LoginComponents/ChangePassword.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button, Card, Alert } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\nimport {\n  reauthenticateWithCredential,\n  EmailAuthProvider,\n  updatePassword,\n} from \"firebase/auth\";\n\nexport const ChangePassword = () => {\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const { currentUser } = useAuth();\n  const [oldPassword, setOldPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  async function handlePasswordUpdate(e) {\n    e.preventDefault();\n\n    if (!oldPassword) return setError(\"Please enter old Password\");\n    else if (!newPassword) return setError(\"Please enter new password\");\n    else if (!confirmPassword) return setError(\"Please confirm password\");\n    else if (newPassword !== confirmPassword)\n      return setError(\"Passwords are not matching\");\n    try {\n      setLoading(true);\n      setError(\"\");\n      setMessage(\"\");\n      const credential = EmailAuthProvider.credential(\n        currentUser.email,\n        oldPassword\n      );\n\n      await reauthenticateWithCredential(currentUser, credential).then(() => {\n        updatePassword(currentUser, newPassword);\n\n        setMessage(\"Password updated successfully\");\n        setLoading(false);\n      });\n    } catch (error) {\n      setError(\"Failed to update password\");\n      console.error(\"Re-authentication error:\", error);\n    }\n  }\n\n  return (\n    <div style={{ maxWidth: \"400px\", margin: \"0 auto\" }}>\n      <Card>\n        <Card.Body>\n          <h2 className=\"text-center mb-4\">Change Password</h2>\n          {message && <Alert variant=\"success\">{message}</Alert>}\n          {error && <Alert variant=\"danger\">{error}</Alert>}\n          <Form onSubmit={handlePasswordUpdate}>\n            <Form.Group id=\"password\">\n              <Form.Label className=\"mb-1\">Current Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                value={oldPassword}\n                onChange={(e) => setOldPassword(e.target.value)}\n                required\n              />\n            </Form.Group>\n            <Form.Group id=\"new-password\" className=\"mt-3\">\n              <Form.Label className=\"mb-1\">New Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                required\n              />\n            </Form.Group>\n            <Form.Group id=\"password-confirm\" className=\"mt-3\">\n              <Form.Label className=\"mb-1\">Confirm Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n              />\n            </Form.Group>\n            <Form.Group disabled={loading} id=\"button\" className=\"mt-3\">\n              <Button type=\"submit\" className=\"w-100 mt-3\">\n                Update Password\n              </Button>\n            </Form.Group>\n          </Form>\n        </Card.Body>\n      </Card>\n      <div className=\"text-center mt-3\">\n        <Link to=\"/home\">Cancel</Link>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"+ZAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,CAAEC,MAAM,CAAEC,IAAI,CAAEC,KAAK,KAAQ,iBAAiB,CAC3D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,OAAO,KAAQ,eAAe,CACvC,OACEC,4BAA4B,CAC5BC,iBAAiB,CACjBC,cAAc,KACT,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvB,MAAO,IAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAClC,IAAAC,SAAA,CAA0Bf,QAAQ,CAAC,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA8BpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAtCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA8BxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,QAAA,CAAwBtB,OAAO,CAAC,CAAC,CAAzBuB,WAAW,CAAAD,QAAA,CAAXC,WAAW,CACnB,IAAAC,UAAA,CAAsC9B,QAAQ,CAAC,EAAE,CAAC,CAAA+B,UAAA,CAAAd,cAAA,CAAAa,UAAA,IAA3CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,IAAAG,UAAA,CAAsClC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,WAAA,CAAAlB,cAAA,CAAAiB,UAAA,IAA3CE,WAAW,CAAAD,WAAA,IAAEE,cAAc,CAAAF,WAAA,IAClC,IAAAG,WAAA,CAA8CtC,QAAQ,CAAC,EAAE,CAAC,CAAAuC,WAAA,CAAAtB,cAAA,CAAAqB,WAAA,IAAnDE,eAAe,CAAAD,WAAA,IAAEE,kBAAkB,CAAAF,WAAA,IAAiB,QAE5C,CAAAG,oBAAoBA,CAAAC,EAAA,SAAAC,qBAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,sBAAA,EAAAA,qBAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAnC,SAAAC,QAAoCC,CAAC,MAAAC,UAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACnCN,CAAC,CAACO,cAAc,CAAC,CAAC,CAAC,GAEd1B,WAAW,EAAAuB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAI,MAAA,UAASxC,QAAQ,CAAC,2BAA2B,CAAC,YACpDiB,WAAW,EAAAmB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAI,MAAA,UAASxC,QAAQ,CAAC,2BAA2B,CAAC,YACzDqB,eAAe,EAAAe,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAI,MAAA,UAASxC,QAAQ,CAAC,yBAAyB,CAAC,eAC5DiB,WAAW,GAAKI,eAAe,GAAAe,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAI,MAAA,UAC/BxC,QAAQ,CAAC,4BAA4B,CAAC,UAAAoC,QAAA,CAAAC,IAAA,IAE7CjC,UAAU,CAAC,IAAI,CAAC,CAChBJ,QAAQ,CAAC,EAAE,CAAC,CACZQ,UAAU,CAAC,EAAE,CAAC,CACRyB,UAAU,CAAG5C,iBAAiB,CAAC4C,UAAU,CAC7CvB,WAAW,CAAC+B,KAAK,CACjB5B,WACF,CAAC,CAAAuB,QAAA,CAAAE,IAAA,UAEK,CAAAlD,4BAA4B,CAACsB,WAAW,CAAEuB,UAAU,CAAC,CAACS,IAAI,CAAC,UAAM,CACrEpD,cAAc,CAACoB,WAAW,CAAEO,WAAW,CAAC,CAExCT,UAAU,CAAC,+BAA+B,CAAC,CAC3CJ,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,SAAAgC,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,cAEFpC,QAAQ,CAAC,2BAA2B,CAAC,CACrC4C,OAAO,CAAC7C,KAAK,CAAC,0BAA0B,CAAAqC,QAAA,CAAAO,EAAO,CAAC,CAAC,yBAAAP,QAAA,CAAAS,IAAA,MAAAd,OAAA,kBAEpD,UAAAN,qBAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,mBACEjC,KAAA,QAAKoD,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eAClDzD,IAAA,CAACR,IAAI,EAAAiE,QAAA,cACHvD,KAAA,CAACV,IAAI,CAACkE,IAAI,EAAAD,QAAA,eACRzD,IAAA,OAAI2D,SAAS,CAAC,kBAAkB,CAAAF,QAAA,CAAC,iBAAe,CAAI,CAAC,CACpD1C,OAAO,eAAIf,IAAA,CAACP,KAAK,EAACmE,OAAO,CAAC,SAAS,CAAAH,QAAA,CAAE1C,OAAO,CAAQ,CAAC,CACrDR,KAAK,eAAIP,IAAA,CAACP,KAAK,EAACmE,OAAO,CAAC,QAAQ,CAAAH,QAAA,CAAElD,KAAK,CAAQ,CAAC,cACjDL,KAAA,CAACZ,IAAI,EAACuE,QAAQ,CAAE9B,oBAAqB,CAAA0B,QAAA,eACnCvD,KAAA,CAACZ,IAAI,CAACwE,KAAK,EAACC,EAAE,CAAC,UAAU,CAAAN,QAAA,eACvBzD,IAAA,CAACV,IAAI,CAAC0E,KAAK,EAACL,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,kBAAgB,CAAY,CAAC,cAC1DzD,IAAA,CAACV,IAAI,CAAC2E,OAAO,EACXC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE9C,WAAY,CACnB+C,QAAQ,CAAE,SAAAA,SAAC5B,CAAC,QAAK,CAAAlB,cAAc,CAACkB,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAC,EAAC,CAChDG,QAAQ,MACT,CAAC,EACQ,CAAC,cACbpE,KAAA,CAACZ,IAAI,CAACwE,KAAK,EAACC,EAAE,CAAC,cAAc,CAACJ,SAAS,CAAC,MAAM,CAAAF,QAAA,eAC5CzD,IAAA,CAACV,IAAI,CAAC0E,KAAK,EAACL,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,cAAY,CAAY,CAAC,cACtDzD,IAAA,CAACV,IAAI,CAAC2E,OAAO,EACXC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE1C,WAAY,CACnB2C,QAAQ,CAAE,SAAAA,SAAC5B,CAAC,QAAK,CAAAd,cAAc,CAACc,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAC,EAAC,CAChDG,QAAQ,MACT,CAAC,EACQ,CAAC,cACbpE,KAAA,CAACZ,IAAI,CAACwE,KAAK,EAACC,EAAE,CAAC,kBAAkB,CAACJ,SAAS,CAAC,MAAM,CAAAF,QAAA,eAChDzD,IAAA,CAACV,IAAI,CAAC0E,KAAK,EAACL,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,kBAAgB,CAAY,CAAC,cAC1DzD,IAAA,CAACV,IAAI,CAAC2E,OAAO,EACXC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEtC,eAAgB,CACvBuC,QAAQ,CAAE,SAAAA,SAAC5B,CAAC,QAAK,CAAAV,kBAAkB,CAACU,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAC,EAAC,CACpDG,QAAQ,MACT,CAAC,EACQ,CAAC,cACbtE,IAAA,CAACV,IAAI,CAACwE,KAAK,EAACS,QAAQ,CAAE5D,OAAQ,CAACoD,EAAE,CAAC,QAAQ,CAACJ,SAAS,CAAC,MAAM,CAAAF,QAAA,cACzDzD,IAAA,CAACT,MAAM,EAAC2E,IAAI,CAAC,QAAQ,CAACP,SAAS,CAAC,YAAY,CAAAF,QAAA,CAAC,iBAE7C,CAAQ,CAAC,CACC,CAAC,EACT,CAAC,EACE,CAAC,CACR,CAAC,cACPzD,IAAA,QAAK2D,SAAS,CAAC,kBAAkB,CAAAF,QAAA,cAC/BzD,IAAA,CAACN,IAAI,EAAC8E,EAAE,CAAC,OAAO,CAAAf,QAAA,CAAC,QAAM,CAAM,CAAC,CAC3B,CAAC,EACH,CAAC,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}